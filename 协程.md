# 协程
### 子程序
或者称为函数，在所有语言中都是层级调用，比如A调用B，B在执行过程中又调用了C，C执行完毕返回，B执行完毕返回，最后是A执行完毕
#### 原理
子程序调用是通过栈实现的，一个线程就是执行一个子程序。  

子程序调用总是一个入口，一次返回，调用顺序是明确的。**而协程的调用和子程序不同**。
### 协程
- 协程执行方式类似子程序，但在执行过程中，子程序内部可**中断**，保存当前子程序现场，执行别的子程序。
- 协程的实现非抢占式调度，由当前协程主动控制切换的时机
### 理解
比如一个函数执行中执行一半去执行另一个函数，执行完一部分再回来执行。**两个函数之间没有相互调用**
### 优势
- 协程执行效率高，子程序切换不是线程切换（单线程）
- 不需要多线程的锁机制，单线程不存在读写冲突
### 缺点
- 适用IO密集型程序较好，不适用CPU密集型：CPU密集型基本没有IO操作，不会主动切换调度器调度导致其他协程得不到调用。
- 协程中不能有阻塞操作，会阻塞整个线程。（单线程）
### 使用方法（python）
- yield：从一个协程中返回，并作为下次加入时的入口
- gevent：在协程遇到IO时自动切换，直到IO完成才有资格被切换回来